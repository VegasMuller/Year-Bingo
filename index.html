<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Year Bingo + Confetti</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        text-align: center;
        background: #f0f2f5;
        padding: 20px;
        color: #1a1a1a;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
      }
      #setup-area {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      textarea {
        width: 100%;
        height: 120px;
        margin: 10px 0;
        border-radius: 8px;
        border: 1px solid #ddd;
        padding: 12px;
        box-sizing: border-box;
        font-size: 14px;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 10px;
        margin-top: 20px;
      }
      .cell {
        aspect-ratio: 1/1;
        background: white;
        border: 2px solid #dee2e6;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px;
        cursor: pointer;
        font-size: 0.8rem;
        border-radius: 10px;
        transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        overflow: hidden;
        font-weight: 500;
      }
      .cell:hover {
        transform: scale(1.05);
        border-color: #4a90e2;
      }
      .cell.completed {
        background: #4caf50;
        color: white;
        border-color: #388e3c;
        text-decoration: line-through;
        box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
      }

      .hidden {
        display: none;
      }
      button {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        background: #4a90e2;
        color: white;
        transition: 0.2s;
      }
      button:hover {
        background: #357abd;
        transform: translateY(-1px);
      }
      .secondary {
        background: #6c757d;
        margin: 5px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üóìÔ∏è 2026 Year Bingo</h1>

      <div id="setup-area">
        <h3>Step 1: Set Your Goals</h3>
        <p>List 25 goals (separated by commas):</p>
        <textarea id="goal-input">
Read 10 books, Drink more water, Learn to code, Exercise 3x week, Save money, Travel, Sleep 8 hours, No soda, Volunteer, Meditation, FREE SPACE, New hobby, Clean garage, Plant a tree, Journaling, Walk 10k steps, Bake bread, Call family, Less screen time, New language, Paint a picture, Run a 5k, Organize photos, Try 5 new foods, Finish this app</textarea
        >
        <br />
        <button onclick="saveGoals()">Launch My Year!</button>
      </div>

      <div id="game-area" class="hidden">
        <div class="grid" id="bingo-grid"></div>
        <div style="margin-top: 30px">
          <button class="secondary" onclick="editGoals()">Edit Goals</button>
          <button
            class="secondary"
            style="background: #e74c3c"
            onclick="resetProgress()"
          >
            Reset Progress
          </button>
        </div>
      </div>
    </div>

    <script>
      let goals = [];
      let completedIndices = [];

      window.onload = function () {
        const savedGoals = localStorage.getItem("bingo-goals");
        const savedProgress = localStorage.getItem("bingo-progress");
        if (savedGoals) {
          goals = JSON.parse(savedGoals);
          if (savedProgress) completedIndices = JSON.parse(savedProgress);
          showBoard();
        }
      };

      function saveGoals() {
        const input = document.getElementById("goal-input").value;
        const goalArray = input
          .split(",")
          .map((item) => item.trim())
          .filter((item) => item !== "");
        if (goalArray.length < 25)
          return alert(`Need 25 goals (you have ${goalArray.length})`);

        goals = goalArray.slice(0, 25);
        localStorage.setItem("bingo-goals", JSON.stringify(goals));
        showBoard();
      }

      function showBoard() {
        document.getElementById("setup-area").classList.add("hidden");
        document.getElementById("game-area").classList.remove("hidden");
        renderGrid();
      }

      function editGoals() {
        document.getElementById("setup-area").classList.remove("hidden");
        document.getElementById("game-area").classList.add("hidden");
      }

      function renderGrid() {
        const grid = document.getElementById("bingo-grid");
        grid.innerHTML = "";
        goals.forEach((goal, index) => {
          const cell = document.createElement("div");
          cell.className =
            "cell" + (completedIndices.includes(index) ? " completed" : "");
          cell.textContent = goal;
          cell.onclick = () => toggleCell(index, cell);
          grid.appendChild(cell);
        });
      }

      function toggleCell(index, cell) {
        cell.classList.toggle("completed");
        if (cell.classList.contains("completed")) {
          completedIndices.push(index);
        } else {
          completedIndices = completedIndices.filter((i) => i !== index);
        }
        localStorage.setItem(
          "bingo-progress",
          JSON.stringify(completedIndices),
        );
        checkBingo();
      }

      function checkBingo() {
        const winPatterns = [
          // Rows
          [0, 1, 2, 3, 4],
          [5, 6, 7, 8, 9],
          [10, 11, 12, 13, 14],
          [15, 16, 17, 18, 19],
          [20, 21, 22, 23, 24],
          // Columns
          [0, 5, 10, 15, 20],
          [1, 6, 11, 16, 21],
          [2, 7, 12, 17, 22],
          [3, 8, 13, 18, 23],
          [4, 9, 14, 19, 24],
          // Diagonals
          [0, 6, 12, 18, 24],
          [4, 8, 12, 16, 20],
        ];

        const isNewWin = winPatterns.some((pattern) =>
          pattern.every((index) => completedIndices.includes(index)),
        );

        if (isNewWin) {
          confetti({
            particleCount: 150,
            spread: 70,
            origin: { y: 0.6 },
            colors: ["#4a90e2", "#4caf50", "#ffeb3b"],
          });
        }
      }

      function resetProgress() {
        if (confirm("Clear checkmarks?")) {
          completedIndices = [];
          localStorage.setItem("bingo-progress", "[]");
          renderGrid();
        }
      }
    </script>
  </body>
</html>
